{% extends "base.html" %}

{% block title %}Catering - Nawarat Thai Mat og Catering{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="py-5 catering-gallery-section">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h1 class="display-4 fw-bold mb-3 text-light">Profesjonell Thai Catering</h1>
                <p class="lead text-light opacity-75 mb-4">Autentisk thailandsk mat til alle anledninger</p>
                <a href="tel:+4761177771" class="btn btn-warning btn-lg px-5 py-3">
                    <i class="fas fa-phone me-2"></i>
                    Ring for tilbud
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Catering Packages -->
<section class="py-5" id="packages">
    <div class="container">
        <div class="row">
            <div class="col">
                <div class="section-header mb-5 text-center">
                    <h2 class="display-6 fw-bold">
                        <i class="fas fa-concierge-bell text-warning me-3"></i>
                        Catering-pakker
                    </h2>
                    <p class="text-muted">Velg mellom våre 6 forskjellige catering-menyer</p>
                </div>
            </div>
        </div>
        
        <div class="row g-4">
            {% for package in packages %}
            <div class="col-lg-4 col-md-6 col-12">
                <div class="card catering-card h-100 shadow-sm">
                    <div class="card-body p-4 d-flex flex-column">
                        <div class="d-flex justify-content-between align-items-start mb-4">
                            <h5 class="card-title">{{ package.name }}</h5>
                            <span class="catering-price-badge">{{ package.price_per_person }}</span>
                        </div>
                        
                        <div class="flex-grow-1">
                            <ul class="catering-dish-list">
                                {% for item in package.items.split('\n') if item.strip() %}
                                <li>{{ item.strip() }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Gallery Section -->
<section class="catering-gallery-section py-5" id="gallery">
    <div class="container">
        <div class="section-header mb-5 text-center">
            <h2 class="h3 fw-bold text-light">Galleri</h2>
            <p class="text-light opacity-75">Se bilder fra våre catering-arrangementer</p>
        </div>
        
        <!-- Thumbnail Gallery -->
        <div class="text-center">
            <div class="catering-gallery">
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering1.jpg') }}" data-bs-title="Catering Bilde 1">
                    <img src="{{ url_for('static', filename='images/Catering1.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering2.jpg') }}" data-bs-title="Catering Bilde 2">
                    <img src="{{ url_for('static', filename='images/Catering2.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering3.jpg') }}" data-bs-title="Catering Bilde 3">
                    <img src="{{ url_for('static', filename='images/Catering3.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering4.jpg') }}" data-bs-title="Catering Bilde 4">
                    <img src="{{ url_for('static', filename='images/Catering4.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering5.jpg') }}" data-bs-title="Catering Bilde 5">
                    <img src="{{ url_for('static', filename='images/Catering5.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering6.jpg') }}" data-bs-title="Catering Bilde 6">
                    <img src="{{ url_for('static', filename='images/Catering6.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering7.jpg') }}" data-bs-title="Catering Bilde 7">
                    <img src="{{ url_for('static', filename='images/Catering7.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/Catering8.jpg') }}" data-bs-title="Catering Bilde 8">
                    <img src="{{ url_for('static', filename='images/Catering8.jpg') }}" alt="Catering" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/catering-potatoes.jpg') }}" data-bs-title="Stekte poteter">
                    <img src="{{ url_for('static', filename='images/catering-potatoes.jpg') }}" alt="Stekte poteter" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/catering-shrimp-salad.jpg') }}" data-bs-title="Rekesalat">
                    <img src="{{ url_for('static', filename='images/catering-shrimp-salad.jpg') }}" alt="Rekesalat" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/catering-beef-salad.jpg') }}" data-bs-title="Biff salat">
                    <img src="{{ url_for('static', filename='images/catering-beef-salad.jpg') }}" alt="Biff salat" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/catering-ham-salad.jpg') }}" data-bs-title="Skinke salat">
                    <img src="{{ url_for('static', filename='images/catering-ham-salad.jpg') }}" alt="Skinke salat" class="catering-thumb" loading="lazy">
                </a>
                <a href="#" class="gallery-item" data-bs-toggle="modal" data-bs-target="#imageModal" data-bs-image="{{ url_for('static', filename='images/catering-spring-rolls.jpg') }}" data-bs-title="Vårruller">
                    <img src="{{ url_for('static', filename='images/catering-spring-rolls.jpg') }}" alt="Vårruller" class="catering-thumb" loading="lazy">
                </a>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="py-5 catering-gallery-section" id="faq">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="section-header mb-5 text-center">
                    <h2 class="h3 fw-bold text-light">Ofte stilte spørsmål</h2>
                    <p class="text-light opacity-75">Svar på de vanligste spørsmålene om vår catering</p>
                </div>
                
                <div class="accordion" id="cateringFAQ">
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                Hvor lang tid på forhånd må jeg bestille?
                            </button>
                        </h3>
                        <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#cateringFAQ">
                            <div class="accordion-body">
                                Vi anbefaler å bestille minst 3-5 dager på forhånd for mindre arrangementer. For store arrangementer (50+ personer) eller i travle perioder, anbefaler vi 1-2 uker på forhånd.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                Leverer dere til hele Gjøvik?
                            </button>
                        </h3>
                        <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#cateringFAQ">
                            <div class="accordion-body">
                                Ja, vi leverer til hele Gjøvik by og nærområder. For leveringer utenfor sentrum kan det tilkomme en liten leveringsavgift.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                Kan dere tilpasse maten for allergier?
                            </button>
                        </h3>
                        <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#cateringFAQ">
                            <div class="accordion-body">
                                Absolutt! Vi kan tilpasse maten for de fleste allergier og kostholdsbehov. Gi oss beskjed når du bestiller, så finner vi gode løsninger.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                Inkluderer prisen servering og opprydding?
                            </button>
                        </h3>
                        <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#cateringFAQ">
                            <div class="accordion-body">
                                Prisene inkluderer levering og oppstilling av maten. Servering og opprydding kan tilkjøpes for større arrangementer - kontakt oss for priser.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content bg-transparent border-0">
            <div class="modal-header border-0">
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center p-0 position-relative">
                <img id="modalImage" src="" alt="" class="img-fluid rounded" style="max-height: 80vh;">
                
                <!-- Navigation arrows -->
                <button class="btn btn-outline-light position-absolute top-50 start-0 translate-middle-y ms-3" id="prevImage" style="z-index: 1050;">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="btn btn-outline-light position-absolute top-50 end-0 translate-middle-y me-3" id="nextImage" style="z-index: 1050;">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
                <!-- Image counter -->
                <div class="position-absolute bottom-0 start-50 translate-middle-x mb-3 bg-dark bg-opacity-75 text-light px-3 py-1 rounded" id="imageCounter" style="z-index: 1050;">
                    <span id="currentImageIndex">1</span> / <span id="totalImages">13</span>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_scripts %}
<script>
// Gallery modal with navigation
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const prevBtn = document.getElementById('prevImage');
    const nextBtn = document.getElementById('nextImage');
    const currentIndexSpan = document.getElementById('currentImageIndex');
    
    // Get all gallery items
    const galleryItems = Array.from(document.querySelectorAll('.gallery-item'));
    let currentImageIndex = 0;
    
    // Update modal content
    function updateModalImage(index) {
        const item = galleryItems[index];
        const imageSrc = item.getAttribute('data-bs-image');
        const imageTitle = item.getAttribute('data-bs-title');
        
        modalImage.src = imageSrc;
        modalImage.alt = imageTitle;
        currentIndexSpan.textContent = index + 1;
        currentImageIndex = index;
        
        // Update button states
        prevBtn.style.display = index === 0 ? 'none' : 'block';
        nextBtn.style.display = index === galleryItems.length - 1 ? 'none' : 'block';
    }
    
    // Show modal
    modal.addEventListener('show.bs.modal', function(event) {
        const trigger = event.relatedTarget;
        const index = galleryItems.indexOf(trigger);
        updateModalImage(index);
    });
    
    // Navigation functions
    function showPrevImage() {
        if (currentImageIndex > 0) {
            updateModalImage(currentImageIndex - 1);
        }
    }
    
    function showNextImage() {
        if (currentImageIndex < galleryItems.length - 1) {
            updateModalImage(currentImageIndex + 1);
        }
    }
    
    // Button events
    prevBtn.addEventListener('click', showPrevImage);
    nextBtn.addEventListener('click', showNextImage);
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (modal.classList.contains('show')) {
            if (e.key === 'ArrowLeft') {
                e.preventDefault();
                showPrevImage();
            } else if (e.key === 'ArrowRight') {
                e.preventDefault();
                showNextImage();
            } else if (e.key === 'Escape') {
                bootstrap.Modal.getInstance(modal).hide();
            }
        }
    });
    
    // Touch/swipe support
    let touchStartX = 0;
    let touchEndX = 0;
    
    modalImage.addEventListener('touchstart', function(e) {
        touchStartX = e.changedTouches[0].screenX;
    });
    
    modalImage.addEventListener('touchend', function(e) {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
    });
    
    function handleSwipe() {
        const swipeThreshold = 50;
        const swipeDistance = touchEndX - touchStartX;
        
        if (Math.abs(swipeDistance) > swipeThreshold) {
            if (swipeDistance > 0) {
                // Swipe right - show previous image
                showPrevImage();
            } else {
                // Swipe left - show next image
                showNextImage();
            }
        }
    }
});

// Smooth scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        const href = this.getAttribute('href');
        if (href && href !== '#') {
            e.preventDefault();
            const target = document.querySelector(href);
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }
    });
});
</script>
{% endblock %}